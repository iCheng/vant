import{A as v,D as b,e as l,Q as T,r as E,o as N,a as A,w as y,C as s,F as H}from"./vue-libs-83dbabed.js";import{c as K,a as P}from"./use-translate-0400f29b.js";import{t as j,m,d as q,w as B}from"./with-install-a78877b5.js";function w(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!T(a)}const[I,S]=K("highlight"),V={autoEscape:j,caseSensitive:Boolean,highlightClass:String,highlightTag:m("span"),keywords:q([String,Array]),sourceString:m(""),tag:m("div"),unhighlightClass:String,unhighlightTag:m("span")},F=v({name:I,props:V,setup(a){const i=b(()=>{const{autoEscape:o,caseSensitive:r,keywords:h,sourceString:c}=a,f=r?"g":"gi";let g=(Array.isArray(h)?h:[h]).filter(e=>e).reduce((e,t)=>{o&&(t=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));const n=new RegExp(t,f);let d;for(;d=n.exec(c);){const p=d.index,C=n.lastIndex;if(p>=C){n.lastIndex++;continue}e.push({start:p,end:C,highlight:!0})}return e},[]);g=g.sort((e,t)=>e.start-t.start).reduce((e,t)=>{const n=e[e.length-1];if(!n||t.start>n.end){const d=n?n.end:0,p=t.start;d!==p&&e.push({start:d,end:p,highlight:!1}),e.push(t)}else n.end=Math.max(n.end,t.end);return e},[]);const u=g[g.length-1];return u&&u.end<c.length&&g.push({start:u.end,end:c.length,highlight:!1}),g}),k=()=>{const{sourceString:o,highlightClass:r,unhighlightClass:h,highlightTag:c,unhighlightTag:f}=a;return i.value.map(x=>{const{start:g,end:u,highlight:e}=x,t=o.slice(g,u);return e?l(c,{class:[S("tag"),r]},w(t)?t:{default:()=>[t]}):l(f,{class:h},w(t)?t:{default:()=>[t]})})};return()=>{let o;const{tag:r}=a;return l(r,{class:S()},w(o=k())?o:{default:()=>[o]})}}}),M=B(F),_=M,$=v({__name:"index",setup(a){const i=P({"zh-CN":{text1:"慢慢来，不要急，生活给你出了难题，可也终有一天会给出答案。",keywords1:"难题",keywords2:["难题","终有一天","答案"],keywords3:"生活",multipleKeywords:"多字符匹配",highlightClass:"设置高亮标签类名"},"en-US":{text1:"Take your time and be patient. Life itself will eventually answer all those questions it once raised for you.",keywords1:"questions",keywords2:["time","life","answer"],keywords3:"life",multipleKeywords:"Multiple Keywords",highlightClass:"Highlight Class Name"}});return(k,o)=>{const r=E("demo-block");return N(),A(H,null,[l(r,{title:s(i)("basicUsage")},{default:y(()=>[l(s(_),{keywords:s(i)("keywords1"),"source-string":s(i)("text1")},null,8,["keywords","source-string"])]),_:1},8,["title"]),l(r,{title:s(i)("multipleKeywords")},{default:y(()=>[l(s(_),{keywords:s(i)("keywords2"),"source-string":s(i)("text1")},null,8,["keywords","source-string"])]),_:1},8,["title"]),l(r,{title:s(i)("highlightClass")},{default:y(()=>[l(s(_),{keywords:s(i)("keywords3"),"source-string":s(i)("text1"),"highlight-class":"custom-class"},null,8,["keywords","source-string"])]),_:1},8,["title"])],64)}}});export{$ as default};
