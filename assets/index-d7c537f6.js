import{u as j}from"./use-expose-efcfdee3.js";import{A as B,y as C,D as q,M as L,u as O,e as a,r as W,o as G,a as J,w as f,C as e,F as K}from"./vue-libs-83dbabed.js";import{w as Q,c as X,a as Y}from"./use-translate-0400f29b.js";import{c as Z,m as w,w as $}from"./with-install-a78877b5.js";const[P,S]=X("text-ellipsis"),ee={rows:Z(1),dots:w("..."),content:w(""),expandText:w(""),collapseText:w(""),position:w("end")},te=B({name:P,props:ee,emits:["clickAction"],setup(o,{emit:t}){const v=C(""),y=C(!1),c=C(!1),b=C(),E=q(()=>y.value?o.collapseText:o.expandText),k=r=>{if(!r)return 0;const _=r.match(/^\d*(\.\d*)?/);return _?Number(_[0]):0},M=()=>{const r=()=>{if(!b.value)return;const i=window.getComputedStyle(b.value),n=document.createElement("div");return Array.prototype.slice.apply(i).forEach(p=>{n.style.setProperty(p,i.getPropertyValue(p))}),n.style.position="fixed",n.style.zIndex="-9999",n.style.top="-9999px",n.style.height="auto",n.style.minHeight="auto",n.style.maxHeight="auto",n.innerText=o.content,document.body.appendChild(n),n},_=(i,n)=>{const{content:x,position:p,dots:T}=o,m=x.length,U=()=>{const l=(s,u)=>{if(u-s<=1)return p==="end"?x.slice(0,s)+T:T+x.slice(u,m);const d=Math.round((s+u)/2);return p==="end"?i.innerText=x.slice(0,d)+T+E.value:i.innerText=T+x.slice(d,m)+E.value,i.offsetHeight>n?p==="end"?l(s,d):l(d,u):p==="end"?l(d,u):l(s,d)};i.innerText=l(0,m)},I=(l,s)=>{if(l[1]-l[0]<=1&&s[1]-s[0]<=1)return x.slice(0,l[0])+T+x.slice(s[1],m);const u=Math.floor((l[0]+l[1])/2),d=Math.ceil((s[0]+s[1])/2);return i.innerText=o.content.slice(0,u)+o.dots+o.content.slice(d,m)+o.expandText,i.offsetHeight>=n?I([l[0],u],[d,s[1]]):I([u,l[1]],[s[0],d])},H=0+m>>1;return o.position==="middle"?i.innerText=I([0,H],[H,m]):U(),i.innerText},h=r();if(!h)return;const{paddingBottom:D,paddingTop:V,lineHeight:F}=h.style,N=Math.ceil((Number(o.rows)+.5)*k(F)+k(V)+k(D));N<h.offsetHeight?(c.value=!0,v.value=_(h,N)):(c.value=!1,v.value=o.content),document.body.removeChild(h)},A=(r=!y.value)=>{y.value=r},R=r=>{A(),t("clickAction",r)},z=()=>a("span",{class:S("action"),onClick:R},[E.value]);return L(M),O([Q,()=>[o.content,o.rows,o.position]],M),j({toggle:A}),()=>a("div",{ref:b,class:S()},[y.value?o.content:v.value,c.value?z():null])}}),oe=$(te),g=oe,ie=B({__name:"index",setup(o){const t=Y({"zh-CN":{text1:"慢慢来，不要急，生活给你出了难题，可也终有一天会给出答案。",text2:"似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。",text3:"那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。",expandText:"展开",collapseText:"收起",expandCollapse:"展开/收起",customRows:"自定义展示行数",collapsePosition:"自定义省略位置",collapseStart:"头部省略",collapseMiddle:"中部省略"},"en-US":{text1:"Take your time and be patient. Life itself will eventually answer all those questions it once raised for you.",text2:"The fleeting time of one's life is everything that belongs to a person. Only this thing truly belongs to you. Everything else is just a momentary pleasure or misfortune, which will soon be gone with the passing of time.",text3:"That day, I turned twenty-one. In the golden age of my life, I was full of dreams. I wanted to love, to eat, and to instantly transform into one of these clouds, part alight, part darkened. It was only later that I understood life is but a slow, drawn-out process of getting your balls crushed. Day by day, you get older. Day by day, your dreams fade. In the end you are no different from a crushed ox. But I hadn't foreseen any of it on my twenty-first birthday. I thought I would be vigorous forever, and that nothing could ever crush me.",expandText:"expand",collapseText:"collapse",expandCollapse:"Expand/Collapse",customRows:"Customize Rows",collapsePosition:"Custom Collapse Position",collapseStart:"Head Area Collapse Position",collapseMiddle:"Middle Area Collapse Position"}});return(v,y)=>{const c=W("demo-block");return G(),J(K,null,[a(c,{title:e(t)("basicUsage")},{default:f(()=>[a(e(g),{content:e(t)("text1")},null,8,["content"])]),_:1},8,["title"]),a(c,{title:e(t)("expandCollapse")},{default:f(()=>[a(e(g),{content:e(t)("text2"),"expand-text":e(t)("expandText"),"collapse-text":e(t)("collapseText")},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"]),a(c,{title:e(t)("customRows")},{default:f(()=>[a(e(g),{rows:"3",content:e(t)("text3"),"expand-text":e(t)("expandText"),"collapse-text":e(t)("collapseText")},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"]),a(c,{title:e(t)("collapsePosition")},{default:f(()=>[a(c,{title:e(t)("collapseStart")},{default:f(()=>[a(e(g),{rows:"1",content:e(t)("text3"),"expand-text":e(t)("expandText"),"collapse-text":e(t)("collapseText"),position:"start"},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"]),a(c,{title:e(t)("collapseMiddle")},{default:f(()=>[a(e(g),{rows:"2",content:e(t)("text3"),"expand-text":e(t)("expandText"),"collapse-text":e(t)("collapseText"),position:"middle"},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"])]),_:1},8,["title"])],64)}}});export{ie as default};
